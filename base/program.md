# 进程、线程、协程


### 进程

进程是操作系统中能`独立运行并作为资源分配`的基本单位，拥有代码和打开的文件资源、数据资源、独立的内存空间。

### 线程

线程从属于进程，是操作系统能够进行运算调度的最小单位，一条线程指的是进程中一个`单一顺序的控制流`，一个进程中可以并发多个线程，每条线程并行执行不同的任务。

线程安全: 就是多线程访问时，采用了加锁机制，当一个线程访问该类的某个数据时，进行保护，其他线程不能进行访问直到该线程读取完，其他线程才可使用。不会出现数据不一致或者数据污染。

线程不安全：就是不提供数据访问保护，有可能出现多个线程先后更改数据造成所得到的数据是脏数据

只要线程之间没有共享资源，那么就是线程安全的，有共享资源，为了保证线程安全，需要引进锁的机制。


### 协程

协程，又称微线程，是比线程颗粒度还小的存在。协程看上去也是子程序，但执行过程中，在子程序内部`可中断`，然后转而执行别的子程序，在适当的时候再返回来接着执行。协程不是被操作系统内核所管理，而完全是`由程序所控制`。

优势
* 最大的优势就是协程极高的执行效率。因为子程序切换不是线程切换，而是由程序自身控制，因此，没有线程切换的开销，和多线程比，线程数量越多，协程的性能优势就越明显。
* 第二大优势就是不需要多线程的锁机制，因为只有一个线程，也不存在同时写变量冲突，在协程中控制共享资源不加锁，只需要判断状态就好了，所以执行效率比多线程高很多。

其实，JS的`Generator * yield`就是协程程序。

利用协程可以做时间切片。

![协程](/img/program.jpeg)