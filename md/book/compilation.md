# 《编译原理》第二版

JavaScript是脚本语言：具有高层次运算符的解释型语言（JS、PHP、Python等）

Java源码 首先要被`编译器`编译成 字节码(bytecode)，然后经过一个虚拟机（`解释器`）对字节码进行解释执行。

而在这之前：一个源程序可能被分割成多个模块，并存放在独立的文件中，把源程序聚合在一起的任务有时会由一个被称为`预处理器`的程序独立完成。


### 编译器的结构

1. 分析部分（编译器的前端）
   1. 把源码分解成多个组成要素
   2. 在组成要素的基础上加上语法结构
   3. 使用这个结构创建
   4. 如果分析部分源码有语法错误，会提供用户修正的有用信息
2. 综合部分（编译器的后端）
   1. 根据分析部分的`中间表示`和`符号表中的信息`来构造目标程序

### 编译器主要行为步骤

1. 字节流
2. 语法分析器 -> 符号流
```
    position = initial + rate * 60
    // -> 分析后
    <id, 1> <=> <id, 2> <+> <id, 3> <*> <60>
```
3. 语法分析 -> 语法树
4. 语义分析 -> 语法树
5. 中间代码生成器 -> 中间表示形式
6. 机器无关代码优化器 -> 中间表示形式
7. 代码生成器 -> 目标机器语言
8. 机器相关代码优化器 -> 目标机器语言

详细步骤：

![编译器](/md/img/bianyiqi.png)


### 翻译器

中间代码的两种形式：
1. 抽象语法树（`AST`）：用来表示源码的层次化语法结构
2. “三地址”指令序列：显示更加完整的示例，最多只执行一个运算


上下文无关文法：一种描述程序设计语言语法的表示方法，由四要素组成
1. 一个终结符号集合
2. 一个非终结符号集合
3. 一个产生式符号集合
4. 指定一个非终结符号为开始符号

```
    // 一个 if-else 语句通常具有以下形式：
    if (expression) statement else statement
    // -> 构造规则可以表示为
    stmt -> if (expr) stmt else stmt
```

语法分析树：用图形的方式展示了从上下文无关文法的开始符号推导出相应语言中的符号串的过程。

一个上下文无关文法可能有多颗语法分析树的终结符，这样的上下文无关文法具有二义性。 - -。


词法分析
1. 剔除空白和注释：
2. 预读：（比如遇到`>`那么就要预先读入一个字符，如果下一个字符是`=`，那么会组合成`>=`）
3. 常量：（比如：`31 + 28 + 59`会被转换为 `<num, 31> <+> <num, 28> <+> <num, 59>`）
4. 识别关键字和标识符（保留字 和 单一表示）
   


### 可靠的程序

一个软件系统最重要的就是：快速、经济、可靠

类型检查是一种有效的，被充分研究的技术（成熟），它可以被用于捕捉程序中的不一致性，它可以用来检测一些错误（可靠）。

垃圾收集机制是：在`效率`和`易编程`及软件`可靠性`之间进行的`折中处理`的极好方式



